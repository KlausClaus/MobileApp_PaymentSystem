{"remainingRequest":"C:\\Users\\klaus\\Downloads\\MobileApp_PaymentSystem-Alternate-documents\\MobileApp_PaymentSystem-Alternate-documents\\Payment\\AdminSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\klaus\\Downloads\\MobileApp_PaymentSystem-Alternate-documents\\MobileApp_PaymentSystem-Alternate-documents\\Payment\\AdminSystem\\Frontend\\src\\views\\TuitionInvoice.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\klaus\\Downloads\\MobileApp_PaymentSystem-Alternate-documents\\MobileApp_PaymentSystem-Alternate-documents\\Payment\\AdminSystem\\Frontend\\src\\views\\TuitionInvoice.vue","mtime":1731236695858},{"path":"C:\\Users\\klaus\\Downloads\\MobileApp_PaymentSystem-Alternate-documents\\MobileApp_PaymentSystem-Alternate-documents\\Payment\\AdminSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\klaus\\Downloads\\MobileApp_PaymentSystem-Alternate-documents\\MobileApp_PaymentSystem-Alternate-documents\\Payment\\AdminSystem\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\klaus\\Downloads\\MobileApp_PaymentSystem-Alternate-documents\\MobileApp_PaymentSystem-Alternate-documents\\Payment\\AdminSystem\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\klaus\\Downloads\\MobileApp_PaymentSystem-Alternate-documents\\MobileApp_PaymentSystem-Alternate-documents\\Payment\\AdminSystem\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVHVpdGlvbkludm9pY2UiLAogIGRhdGEoKSB7CiAgICAvLyDorqHnrpfmgLvotLnnlKjnmoTmlrnms5UKICAgIGNvbnN0IGNhbGN1bGF0ZVRvdGFsID0gKGl0ZW0pID0+IHsKICAgICAgY29uc3QgZmVlcyA9IFsndHVpdGlvbkZlZScsICdhY2NvbW1vZGF0aW9uRmVlJywgJ2Jvb2tGZWUnLCAnbWF0ZXJpYWxGZWUnLCAnYWN0aXZpdHlGZWUnLCAnZXhhbUZlZSddOwogICAgICByZXR1cm4gZmVlcy5yZWR1Y2UoKHRvdGFsLCBmZWUpID0+IHRvdGFsICsgKE51bWJlcihpdGVtW2ZlZV0pIHx8IDApLCAwKTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIHBhZ2VTaXplOiAxNSwKICAgICAgc3R1ZGVudE5hbWU6ICIiLAogICAgICBzdHVkZW50SWQ6ICIiLAogICAgICBmb3JtOiB7CiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIG1ham9yOiAnJywKICAgICAgfSwKICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdLAogICAgICBuYW1lTGlzdDogW10sCiAgICAgIGluZm9MaXN0OiBbXSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIHN0dWRlbnROYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAnUGxlYXNlIHNlbGVjdCBhIHN0dWRlbnQnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CiAgICAgICAgXSwKICAgICAgICBhY2FkZW1pY1llYXI6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgYWNhZGVtaWMgeWVhcicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJTZWFyY2hpbmcgZm9yOiIsIHRoaXMuc3R1ZGVudE5hbWUpOwogICAgICB0aGlzLnJlcXVlc3QuZ2V0KCIvdHVpdGlvbkludm9pY2UvcGFnZSIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwKICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgbmFtZTogdGhpcy5zdHVkZW50TmFtZQogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJSZXNwb25zZSBkYXRhOiIsIHJlcy5kYXRhKTsgLy8g6LCD6K+V77ya5omT5Y2w5ZON5bqU5pWw5o2uCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5yZWNvcmRzOwogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgfSkKICAgIH0sCiAgICBzYXZlKCkgewogICAgICB0aGlzLiRyZWZzLmVkaXRGb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5mb3JtLnN0YXR1cyA9IDAKICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkKICAgICAgICAgIGNvbnN0IHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKQogICAgICAgICAgY29uc3QgbW9udGggPSBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpCiAgICAgICAgICBjb25zdCBkYXkgPSBTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKQogICAgICAgICAgY29uc3QgaG91cnMgPSBTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJykKICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBTdHJpbmcobm93LmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKQogICAgICAgICAgdGhpcy5mb3JtLmNyZWF0ZWRUaW1lID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9ICR7aG91cnN9OiR7bWludXRlc31gCgogICAgICAgICAgdGhpcy5yZXF1ZXN0LnBvc3QoIi90dWl0aW9uSW52b2ljZSIsIHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLm5vdGlmeSA9PT0gMCkgewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdWlkOiByZXMuZGF0YS51aWQsCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICJZb3VyIHR1aXRpb24gYmlsbCBoYXMgYmVlbiByZWxlYXNlZCwgcGxlYXNlIHBheSBpdCBpbiB0aW1lISIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdC5wb3N0KCIvbm90aWZ5IiwgZGF0YSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZCgpCiAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ0JpbGwgY3JlYXRlZCBhbmQgbm90aWZpY2F0aW9uIHNlbnQnKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5sb2FkKCkKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCdCaWxsIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiT3BlcmF0aW9uIGZhaWxlZCIpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUVkaXQocm93KSB7CiAgICAgIHRoaXMuZm9ybSA9IHsuLi5yb3d9CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCiAgICB9LAogICAgZGVsKGlkKSB7CiAgICAgIHRoaXMucmVxdWVzdC5kZWxldGUoIi90dWl0aW9uSW52b2ljZS9kZWwvIiArIGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCJTdWNjZXNzZnVsbHkgZGVsZXRlZCIpCiAgICAgICAgICB0aGlzLmxvYWQoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJEZWxldGUgZmFpbGVkIikKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsCiAgICB9LAogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuc3R1ZGVudE5hbWUgPSAiIgogICAgICB0aGlzLmxvYWQoKQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UocGFnZVNpemUpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHBhZ2VTaXplCiAgICAgIHRoaXMubG9hZCgpCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7CiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW0KICAgICAgdGhpcy5sb2FkKCkKICAgIH0sCiAgICBkZWxldGVNb3JlKCkgewogICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIlBsZWFzZSBzZWxlY3QgaXRlbXMgdG8gZGVsZXRlIikKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjb25zdCBpZHMgPSB0aGlzLm11bHRpcGxlU2VsZWN0aW9uLm1hcCh2ID0+IHYuaWQpCiAgICAgIHRoaXMucmVxdWVzdC5wb3N0KCIvdHVpdGlvbkludm9pY2UvZGVsL2JhdGNoIiwgaWRzKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIkJhdGNoIGRlbGV0aW9uIHN1Y2Nlc3NmdWwiKQogICAgICAgICAgdGhpcy5sb2FkKCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiQmF0Y2ggZGVsZXRpb24gZmFpbGVkIikKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgbGlzdGVuRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuJHJlZnMuZWRpdEZvcm0gJiYgdGhpcy4kcmVmcy5lZGl0Rm9ybS5yZXNldEZpZWxkcygpCiAgICAgIHRoaXMuZm9ybSA9IHt9CiAgICB9LAogICAgZ2V0TmFtZSgpIHsKICAgICAgdGhpcy5yZXF1ZXN0LmdldCgiL3N0dWRlbnQvbGlzdCIpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmluZm9MaXN0ID0gcmVzLmRhdGEKICAgICAgICB0aGlzLm5hbWVMaXN0ID0gcmVzLmRhdGEubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKQogICAgICB9KQogICAgfSwKICAgIHNlbGVjdENoYW5nZShpbmRleCkgewogICAgICBjb25zdCBzZWxlY3RlZFN0dWRlbnQgPSB0aGlzLmluZm9MaXN0W2luZGV4XQogICAgICB0aGlzLnN0dWRlbnRJZCA9IHNlbGVjdGVkU3R1ZGVudC5pZAogICAgICB0aGlzLmZvcm0uc3R1ZGVudEVtYWlsID0gc2VsZWN0ZWRTdHVkZW50LmVtYWlsCiAgICAgIHRoaXMuZm9ybS5tYWpvciA9IHNlbGVjdGVkU3R1ZGVudC5wcm9mZXNzaW9uYWwKICAgICAgdGhpcy5mb3JtLnN0dWRlbnROYW1lID0gc2VsZWN0ZWRTdHVkZW50Lm5hbWUKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBmb3JtOiB7CiAgICAgIGhhbmRsZXIobmV3VmFsKSB7CiAgICAgICAgY29uc3QgdG90YWwgPSBbJ3R1aXRpb25GZWUnLCAnYWNjb21tb2RhdGlvbkZlZScsICdib29rRmVlJywgJ21hdGVyaWFsRmVlJywgJ2FjdGl2aXR5RmVlJywgJ2V4YW1GZWUnXQogICAgICAgICAgICAucmVkdWNlKChzdW0sIGZlZSkgPT4gc3VtICsgKE51bWJlcihuZXdWYWxbZmVlXSkgfHwgMCksIDApCiAgICAgICAgdGhpcy5mb3JtLnRvdGFsRmVlID0gTnVtYmVyKHRvdGFsLnRvRml4ZWQoMikpCiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9Cn0K"},{"version":3,"sources":["TuitionInvoice.vue"],"names":[],"mappings":";AAgOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TuitionInvoice.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"tuition-container\">\n    <!-- 搜索和操作区域 -->\n    <div class=\"header-actions\">\n      <div class=\"search-bar\">\n        <el-input\n            v-model=\"studentName\"\n            placeholder=\"Please enter student name\"\n            prefix-icon=\"el-icon-search\"\n            clearable\n            class=\"search-input\">\n        </el-input>\n        <el-button type=\"primary\" @click=\"load\">Search</el-button>\n        <el-button type=\"warning\" @click=\"reset\">Reset</el-button>\n      </div>\n\n      <div class=\"operation-buttons\">\n        <el-button\n            type=\"primary\"\n            icon=\"el-icon-plus\"\n            @click=\"dialogFormVisible = true\">\n          New Tuition Bill\n        </el-button>\n\n        <el-popconfirm\n            title=\"Are you sure to delete these items?\"\n            confirm-button-text='Confirm'\n            cancel-button-text='Cancel'\n            icon=\"el-icon-warning\"\n            icon-color=\"#ff4949\"\n            @confirm=\"deleteMore\">\n          <el-button\n              slot=\"reference\"\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              :disabled=\"!multipleSelection.length\">\n            Batch Delete\n          </el-button>\n        </el-popconfirm>\n      </div>\n    </div>\n\n    <!-- 数据表格 -->\n    <el-table\n        :data=\"tableData\"\n        border\n        stripe\n        class=\"tuition-table\"\n        @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n      <el-table-column prop=\"studentName\" label=\"Student Name\"></el-table-column>\n      <el-table-column prop=\"studentEmail\" label=\"Email\"></el-table-column>\n      <el-table-column prop=\"major\" label=\"Major\"></el-table-column>\n      <el-table-column prop=\"academicYear\" label=\"Academic Year\"></el-table-column>\n      <el-table-column prop=\"totalFee\" label=\"Total Fee\">\n        <template slot-scope=\"scope\">\n          $ {{ scope.row.totalFee }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Operations\" width=\"220\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button\n              type=\"primary\"\n              size=\"mini\"\n              icon=\"el-icon-edit\"\n              @click=\"handleEdit(scope.row)\">\n            Edit\n          </el-button>\n          <el-popconfirm\n              title=\"Are you sure to delete this item?\"\n              confirm-button-text='Confirm'\n              cancel-button-text='Cancel'\n              icon=\"el-icon-warning\"\n              icon-color=\"#ff4949\"\n              @confirm=\"del(scope.row.id)\">\n            <el-button\n                slot=\"reference\"\n                type=\"danger\"\n                size=\"mini\"\n                icon=\"el-icon-delete\">\n              Delete\n            </el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页器 -->\n    <el-pagination\n        class=\"pagination\"\n        background\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[10, 15, 20, 50, 100]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\">\n    </el-pagination>\n\n    <!-- 表单弹窗 -->\n    <el-dialog\n        :title=\"form.id ? 'Edit Tuition Bill' : 'New Tuition Bill'\"\n        :visible.sync=\"dialogFormVisible\"\n        width=\"600px\"\n        @close=\"listenDialogClose\">\n      <el-form\n          ref=\"editForm\"\n          :model=\"form\"\n          label-width=\"150px\"\n          :rules=\"rules\">\n        <el-form-item label=\"Student\" prop=\"studentName\">\n          <el-select\n              v-model=\"form.studentName\"\n              placeholder=\"Select student\"\n              style=\"width: 100%\"\n              @focus=\"getName\"\n              @change=\"selectChange\">\n            <el-option\n                v-for=\"(item, index) in nameList\"\n                :key=\"index\"\n                :label=\"item\"\n                :value=\"index\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"Email\">\n          <el-input v-model=\"form.studentEmail\" disabled></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"Major\">\n          <el-input v-model=\"form.major\" disabled></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"Academic Year\" prop=\"academicYear\">\n          <el-input v-model=\"form.academicYear\"></el-input>\n        </el-form-item>\n\n        <div class=\"fees-section\">\n          <h3>Fee Details</h3>\n          <el-form-item label=\"*Tuition Fee\" prop=\"tuitionFee\">\n            <el-input-number\n                v-model=\"form.tuitionFee\"\n                :min=\"0\"\n                :precision=\"2\"\n                :controls=\"false\"\n                style=\"width: 100%\">\n            </el-input-number>\n          </el-form-item>\n\n          <el-form-item label=\"*Accommodation Fee\" prop=\"accommodationFee\">\n            <el-input-number\n                v-model=\"form.accommodationFee\"\n                :min=\"0\"\n                :precision=\"2\"\n                :controls=\"false\"\n                style=\"width: 100%\">\n            </el-input-number>\n          </el-form-item>\n\n          <el-form-item label=\"Book Fee\" prop=\"bookFee\">\n            <el-input-number\n                v-model=\"form.bookFee\"\n                :min=\"0\"\n                :precision=\"2\"\n                :controls=\"false\"\n                style=\"width: 100%\">\n            </el-input-number>\n          </el-form-item>\n\n          <el-form-item label=\"Material Fee\" prop=\"materialFee\">\n            <el-input-number\n                v-model=\"form.materialFee\"\n                :min=\"0\"\n                :precision=\"2\"\n                :controls=\"false\"\n                style=\"width: 100%\">\n            </el-input-number>\n          </el-form-item>\n\n          <el-form-item label=\"Activity Fee\" prop=\"activityFee\">\n            <el-input-number\n                v-model=\"form.activityFee\"\n                :min=\"0\"\n                :precision=\"2\"\n                :controls=\"false\"\n                style=\"width: 100%\">\n            </el-input-number>\n          </el-form-item>\n\n          <el-form-item label=\"Exam Fee\" prop=\"examFee\">\n            <el-input-number\n                v-model=\"form.examFee\"\n                :min=\"0\"\n                :precision=\"2\"\n                :controls=\"false\"\n                style=\"width: 100%\">\n            </el-input-number>\n          </el-form-item>\n\n          <el-form-item label=\"*Total Fee\" prop=\"totalFee\">\n            <el-input-number\n                v-model=\"form.totalFee\"\n                :min=\"0\"\n                :precision=\"2\"\n                :controls=\"false\"\n                style=\"width: 100%\"\n                disabled>\n            </el-input-number>\n          </el-form-item>\n        </div>\n      </el-form>\n\n      <div slot=\"footer\">\n        <el-button @click=\"dialogFormVisible = false\">Cancel</el-button>\n        <el-button type=\"primary\" @click=\"save\">Confirm</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TuitionInvoice\",\n  data() {\n    // 计算总费用的方法\n    const calculateTotal = (item) => {\n      const fees = ['tuitionFee', 'accommodationFee', 'bookFee', 'materialFee', 'activityFee', 'examFee'];\n      return fees.reduce((total, fee) => total + (Number(item[fee]) || 0), 0);\n    };\n\n    return {\n      tableData: [],\n      total: 0,\n      pageNum: 1,\n      pageSize: 15,\n      studentName: \"\",\n      studentId: \"\",\n      form: {\n        email: '',\n        major: '',\n      },\n      multipleSelection: [],\n      nameList: [],\n      infoList: [],\n      dialogFormVisible: false,\n      rules: {\n        studentName: [\n          { required: true, message: 'Please select a student', trigger: 'change' }\n        ],\n        academicYear: [\n          { required: true, message: 'Please enter academic year', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods: {\n    load() {\n      console.log(\"Searching for:\", this.studentName);\n      this.request.get(\"/tuitionInvoice/page\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          name: this.studentName\n        }\n      }).then(res => {\n        console.log(\"Response data:\", res.data); // 调试：打印响应数据\n        this.tableData = res.data.records;\n        this.total = res.data.total;\n      })\n    },\n    save() {\n      this.$refs.editForm.validate((valid) => {\n        if (valid) {\n          this.form.status = 0\n          const now = new Date()\n          const year = now.getFullYear()\n          const month = String(now.getMonth() + 1).padStart(2, '0')\n          const day = String(now.getDate()).padStart(2, '0')\n          const hours = String(now.getHours()).padStart(2, '0')\n          const minutes = String(now.getMinutes()).padStart(2, '0')\n          this.form.createdTime = `${year}-${month}-${day} ${hours}:${minutes}`\n\n          this.request.post(\"/tuitionInvoice\", this.form).then(res => {\n            if (res.code === '200') {\n              if (res.data.notify === 0) {\n                const data = {\n                  uid: res.data.uid,\n                  content: \"Your tuition bill has been released, please pay it in time!\"\n                }\n                this.request.post(\"/notify\", data).then(() => {\n                  this.load()\n                  this.dialogFormVisible = false\n                  this.$message.success('Bill created and notification sent')\n                })\n              } else {\n                this.load()\n                this.dialogFormVisible = false\n                this.$message.success('Bill created successfully')\n              }\n            } else {\n              this.$message.error(\"Operation failed\")\n            }\n          })\n        }\n      })\n    },\n    handleEdit(row) {\n      this.form = {...row}\n      this.dialogFormVisible = true\n    },\n    del(id) {\n      this.request.delete(\"/tuitionInvoice/del/\" + id).then(res => {\n        if (res) {\n          this.$message.success(\"Successfully deleted\")\n          this.load()\n        } else {\n          this.$message.error(\"Delete failed\")\n        }\n      })\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n    reset() {\n      this.studentName = \"\"\n      this.load()\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum\n      this.load()\n    },\n    deleteMore() {\n      if (this.multipleSelection.length === 0) {\n        this.$message.warning(\"Please select items to delete\")\n        return\n      }\n      const ids = this.multipleSelection.map(v => v.id)\n      this.request.post(\"/tuitionInvoice/del/batch\", ids).then(res => {\n        if (res.data) {\n          this.$message.success(\"Batch deletion successful\")\n          this.load()\n        } else {\n          this.$message.error(\"Batch deletion failed\")\n        }\n      })\n    },\n    listenDialogClose() {\n      this.$refs.editForm && this.$refs.editForm.resetFields()\n      this.form = {}\n    },\n    getName() {\n      this.request.get(\"/student/list\").then(res => {\n        this.infoList = res.data\n        this.nameList = res.data.map(item => item.name)\n      })\n    },\n    selectChange(index) {\n      const selectedStudent = this.infoList[index]\n      this.studentId = selectedStudent.id\n      this.form.studentEmail = selectedStudent.email\n      this.form.major = selectedStudent.professional\n      this.form.studentName = selectedStudent.name\n    }\n  },\n  watch: {\n    form: {\n      handler(newVal) {\n        const total = ['tuitionFee', 'accommodationFee', 'bookFee', 'materialFee', 'activityFee', 'examFee']\n            .reduce((sum, fee) => sum + (Number(newVal[fee]) || 0), 0)\n        this.form.totalFee = Number(total.toFixed(2))\n      },\n      deep: true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.tuition-container {\n  padding: 20px;\n}\n\n/* 修改后的头部布局样式 */\n.header-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.search-bar {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.search-input {\n  width: 300px;\n}\n\n.operation-buttons {\n  display: flex;\n  gap: 10px;\n}\n\n.tuition-table {\n  margin-bottom: 20px;\n}\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n.fees-section {\n  margin-top: 20px;\n  padding-top: 20px;\n  border-top: 1px solid #eee;\n}\n\n.fees-section h3 {\n  margin-bottom: 20px;\n  color: #606266;\n}\n\n.headerBg {\n  background-color: #f5f7fa !important;\n}\n\n.el-input-number {\n  width: 100%;\n}\n\n.el-button {\n  transition: all 0.3s;\n}\n\n.el-button:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n</style>"]}]}